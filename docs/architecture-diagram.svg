<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="680" viewBox="0 0 1200 680">
  <defs>
    <style>
      .title { font: 700 28px Arial, sans-serif; fill: #0f172a; }
      .label { font: 600 16px Arial, sans-serif; fill: #0f172a; }
      .small { font: 13px Arial, sans-serif; fill: #334155; }
      .box { fill: #f8fafc; stroke: #0f172a; stroke-width: 2; rx: 12; }
      .accent { fill: #e0f2fe; stroke: #0369a1; stroke-width: 2; rx: 12; }
      .ops { fill: #ecfeff; stroke: #0f766e; stroke-width: 2; rx: 12; }
      .ci { fill: #f0fdf4; stroke: #166534; stroke-width: 2; rx: 12; }
      .arrow { stroke: #0f172a; stroke-width: 2.5; marker-end: url(#arrowhead); fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0f172a" />
    </marker>
  </defs>

  <rect width="1200" height="680" fill="#ffffff" />
  <text x="40" y="52" class="title">Strava Recording Quality - Production Architecture</text>

  <rect x="70" y="170" width="220" height="110" class="box" />
  <text x="100" y="210" class="label">Web Client</text>
  <text x="100" y="235" class="small">React + Vite + Leaflet</text>
  <text x="100" y="257" class="small">Public HTTPS UI</text>

  <rect x="360" y="160" width="220" height="130" class="accent" />
  <text x="390" y="205" class="label">Nginx (EC2)</text>
  <text x="390" y="230" class="small">TLS termination</text>
  <text x="390" y="252" class="small">Reverse proxy to API</text>

  <rect x="650" y="150" width="260" height="150" class="accent" />
  <text x="680" y="195" class="label">FastAPI Backend</text>
  <text x="680" y="220" class="small">Gunicorn + Uvicorn workers</text>
  <text x="680" y="242" class="small">OAuth, sync, GeoJSON, features</text>
  <text x="680" y="264" class="small">Quality metric computation</text>

  <rect x="940" y="340" width="220" height="130" class="box" />
  <text x="970" y="385" class="label">Strava API</text>
  <text x="970" y="410" class="small">OAuth token exchange</text>
  <text x="970" y="432" class="small">Activities + streams</text>

  <rect x="650" y="390" width="260" height="150" class="box" />
  <text x="680" y="435" class="label">PostgreSQL + PostGIS</text>
  <text x="680" y="460" class="small">activities</text>
  <text x="680" y="482" class="small">activity_points (point-level GPS)</text>
  <text x="680" y="504" class="small">activity_quality_metrics</text>

  <rect x="70" y="430" width="250" height="120" class="ci" />
  <text x="100" y="472" class="label">GitHub Actions CI</text>
  <text x="100" y="497" class="small">Lint + tests + image build</text>
  <text x="100" y="519" class="small">Merge gate for main branch</text>

  <rect x="360" y="430" width="220" height="120" class="ops" />
  <text x="390" y="472" class="label">Observability</text>
  <text x="390" y="497" class="small">JSON request logs</text>
  <text x="390" y="519" class="small">Sentry (optional)</text>

  <path d="M290 225 L360 225" class="arrow" />
  <path d="M580 225 L650 225" class="arrow" />
  <path d="M780 300 L780 390" class="arrow" />
  <path d="M910 225 L1000 340" class="arrow" />
  <path d="M1000 340 L910 225" class="arrow" />
  <path d="M580 490 L650 490" class="arrow" />
  <path d="M910 470 L940 420" class="arrow" />
  <path d="M780 390 L780 300" class="arrow" />

  <text x="300" y="210" class="small">HTTPS</text>
  <text x="595" y="210" class="small">proxy_pass</text>
  <text x="792" y="350" class="small">SQL + PostGIS</text>
  <text x="930" y="300" class="small">OAuth + REST</text>
  <text x="590" y="525" class="small">deploy evidence</text>
</svg>
